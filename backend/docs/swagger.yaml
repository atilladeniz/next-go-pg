basePath: /api/v1
definitions:
  handler.ErrorResponse:
    properties:
      error:
        example: unauthorized
        type: string
    type: object
  handler.MessageResponse:
    properties:
      message:
        example: Hello World
        type: string
    type: object
  handler.Send2FAEnabledNotificationRequest:
    properties:
      email:
        type: string
      method:
        type: string
      name:
        type: string
    type: object
  handler.Send2FAOTPRequest:
    properties:
      email:
        type: string
      name:
        type: string
      otp:
        type: string
    type: object
  handler.SendMagicLinkRequest:
    properties:
      email:
        type: string
      url:
        type: string
    type: object
  handler.SendPasskeyAddedNotificationRequest:
    properties:
      device:
        type: string
      email:
        type: string
      name:
        type: string
      passkeyName:
        type: string
    type: object
  handler.SendVerificationEmailRequest:
    properties:
      email:
        type: string
      name:
        type: string
      url:
        type: string
    type: object
  handler.SessionCreatedRequest:
    properties:
      ipAddress:
        type: string
      sessionId:
        type: string
      userAgent:
        type: string
      userId:
        type: string
    type: object
  handler.StartExportRequest:
    properties:
      dataType:
        description: '"stats", "activity", or "all"'
        type: string
      format:
        description: '"csv" or "json"'
        type: string
    type: object
  handler.StartExportResponse:
    properties:
      jobId:
        type: string
      message:
        type: string
    type: object
  handler.UpdateStatRequest:
    properties:
      delta:
        description: +1 or -1
        example: 1
        type: integer
      field:
        description: '"projects", "activity", "notifications"'
        example: projects
        type: string
    type: object
  handler.UserResponse:
    properties:
      email:
        example: john@example.com
        type: string
      id:
        example: user_123
        type: string
      name:
        example: John Doe
        type: string
    type: object
  handler.UserStatsResponse:
    properties:
      activityToday:
        type: integer
      lastLogin:
        type: string
      memberSince:
        type: string
      notifications:
        type: integer
      projectCount:
        type: integer
      userId:
        type: string
    type: object
host: localhost:8080
info:
  contact: {}
  description: Go Clean Architecture API with Better Auth integration
  title: Next-Go-PG API
  version: "1.0"
paths:
  /export/download/{id}:
    get:
      description: Downloads the exported file by download ID
      parameters:
      - description: Download ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/octet-stream
      responses:
        "200":
          description: OK
          schema:
            type: file
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Download a completed export
      tags:
      - export
  /export/start:
    post:
      consumes:
      - application/json
      description: Starts a background job to export user data
      parameters:
      - description: Export parameters
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.StartExportRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.StartExportResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Start a data export job
      tags:
      - export
  /hello:
    get:
      consumes:
      - application/json
      description: Returns a hello message, no auth required
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.MessageResponse'
      summary: Public hello endpoint
      tags:
      - public
  /me:
    get:
      consumes:
      - application/json
      description: Get the currently authenticated user's information
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.UserResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get current user
      tags:
      - users
  /protected/hello:
    get:
      consumes:
      - application/json
      description: Returns a personalized hello message for authenticated users
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.MessageResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Protected hello endpoint
      tags:
      - protected
  /stats:
    get:
      consumes:
      - application/json
      description: Get statistics for the authenticated user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.UserStatsResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user statistics
      tags:
      - users
    post:
      consumes:
      - application/json
      description: Modify a stat value and broadcast the change via SSE
      parameters:
      - description: Stat update request
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.UpdateStatRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.UserStatsResponse'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update user statistics
      tags:
      - users
  /webhooks/send-2fa-enabled:
    post:
      consumes:
      - application/json
      description: Notifies user that 2FA has been enabled on their account
      parameters:
      - description: Webhook secret for authentication
        in: header
        name: X-Webhook-Secret
        required: true
        type: string
      - description: Notification data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.Send2FAEnabledNotificationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.MessageResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Send 2FA enabled notification
      tags:
      - webhooks
  /webhooks/send-2fa-otp:
    post:
      consumes:
      - application/json
      description: Called by Better Auth to send 2FA one-time password via email
      parameters:
      - description: Webhook secret for authentication
        in: header
        name: X-Webhook-Secret
        required: true
        type: string
      - description: OTP data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.Send2FAOTPRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.MessageResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Send 2FA OTP email
      tags:
      - webhooks
  /webhooks/send-magic-link:
    post:
      consumes:
      - application/json
      description: Called by Better Auth to send magic link login email
      parameters:
      - description: Webhook secret for authentication
        in: header
        name: X-Webhook-Secret
        required: true
        type: string
      - description: Magic link data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.SendMagicLinkRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.MessageResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Send magic link email
      tags:
      - webhooks
  /webhooks/send-passkey-added:
    post:
      consumes:
      - application/json
      description: Notifies user that a new passkey has been added to their account
      parameters:
      - description: Webhook secret for authentication
        in: header
        name: X-Webhook-Secret
        required: true
        type: string
      - description: Notification data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.SendPasskeyAddedNotificationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.MessageResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Send passkey added notification
      tags:
      - webhooks
  /webhooks/send-verification-email:
    post:
      consumes:
      - application/json
      description: Called by Better Auth to send email verification link
      parameters:
      - description: Webhook secret for authentication
        in: header
        name: X-Webhook-Secret
        required: true
        type: string
      - description: Verification data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.SendVerificationEmailRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.MessageResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Send verification email
      tags:
      - webhooks
  /webhooks/session-created:
    post:
      consumes:
      - application/json
      description: Called by Better Auth when a new session is created. Sends notification
        email for new devices.
      parameters:
      - description: Webhook secret for authentication
        in: header
        name: X-Webhook-Secret
        required: true
        type: string
      - description: Session data
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/handler.SessionCreatedRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/handler.MessageResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/handler.ErrorResponse'
      summary: Handle new session webhook
      tags:
      - webhooks
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
