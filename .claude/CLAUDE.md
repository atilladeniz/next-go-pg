# GocaTest - Projekt Kontext

## Projektübersicht

Full-Stack Monorepo mit Next.js 16 Frontend und Go Backend, PostgreSQL Datenbank und Better Auth für Authentifizierung.

## Tech Stack

### Frontend (`/frontend`)
- **Framework**: Next.js 16 mit App Router und Turbopack
- **Sprache**: TypeScript 5.9
- **Styling**: Tailwind CSS 4 + shadcn/ui (neutral theme)
- **State**: TanStack Query (React Query)
- **Auth Client**: Better Auth React Client
- **API Client**: Orval-generierte Hooks aus OpenAPI Spec
- **Linting**: Biome
- **Package Manager**: Bun

### Backend (`/backend`)
- **Sprache**: Go
- **Framework**: Chi Router
- **Architektur**: Clean Architecture (Handler → Usecase → Repository)
- **Auth**: Better Auth Session Validation
- **API Docs**: Swagger/OpenAPI

### Infrastruktur
- **Datenbank**: PostgreSQL 16 (Docker)
- **Dev Environment**: Docker Compose für DB

## Wichtige Dateien

### API Definition
- `backend/api/openapi.yaml` - OpenAPI 3.0 Spec (Single Source of Truth)
- `frontend/orval.config.ts` - Orval Config für API Client Generierung

### Authentifizierung
- `frontend/src/lib/auth.ts` - Better Auth Server Config
- `frontend/src/lib/auth-client.ts` - Better Auth Client mit Hooks
- `frontend/src/proxy.ts` - Route Protection (Next.js 16 Proxy)

### UI Komponenten
- `frontend/src/components/ui/` - shadcn/ui Komponenten (alle installiert)
- `frontend/src/components/mode-toggle.tsx` - Dark Mode Toggle
- `frontend/src/components/theme-provider.tsx` - Theme Provider

## Befehle

```bash
# Development
make dev              # Start DB + Frontend + Backend
make dev-frontend     # Nur Frontend (localhost:3000)
make dev-backend      # Nur Backend (localhost:8080)

# Database
make db-up            # PostgreSQL starten
make db-down          # PostgreSQL stoppen
make db-reset         # Datenbank zurücksetzen

# API Generation
make api              # TypeScript Client aus OpenAPI generieren

# Quality
make lint             # Biome Linting
make lint-fix         # Auto-fix Lint Errors
make typecheck        # TypeScript Check

# Build
make build            # Frontend + Backend bauen
make build-frontend   # Next.js Production Build
make build-backend    # Go Binary
```

## Projektstruktur

```
gocatest/
├── backend/
│   ├── api/
│   │   └── openapi.yaml      # API Specification
│   ├── cmd/server/           # Entrypoint
│   ├── internal/
│   │   ├── handler/          # HTTP Handler
│   │   └── middleware/       # Auth, CORS
│   └── pkg/config/           # Configuration
├── frontend/
│   ├── src/
│   │   ├── api/              # Generierte API Clients
│   │   ├── app/
│   │   │   ├── (auth)/       # Login, Register
│   │   │   ├── (protected)/  # Dashboard
│   │   │   └── api/auth/     # Better Auth Handler
│   │   ├── components/
│   │   │   └── ui/           # shadcn Komponenten
│   │   └── lib/              # Auth, Utils
│   └── orval.config.ts
└── docker-compose.dev.yml
```

## Konventionen

### Code Style
- Tabs für Indentation (Biome Config)
- Double Quotes für Strings
- Keine Semicolons (außer nötig)
- Deutsche UI Texte

### Git Commits
- Englische Commit Messages
- Präfix: Add, Update, Fix, Remove
- Keine "Generated by" Tags

### API
- OpenAPI 3.0 als Source of Truth
- `make api` nach Spec-Änderungen ausführen
- Generated Files nicht manuell editieren

## Biome Ignores
- `src/api/endpoints/` - Orval generiert
- `src/api/models/` - Orval generiert
- `src/components/ui/` - shadcn generiert

## Environment Variables

### Frontend (.env.local)
```
DATABASE_URL=postgres://postgres:postgres@localhost:5432/gocatest
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=http://localhost:8080
BETTER_AUTH_SECRET=<secret>
```

### Backend
```
DATABASE_URL=postgres://postgres:postgres@localhost:5432/gocatest
PORT=8080
```
